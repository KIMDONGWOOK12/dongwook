(()=>{"use strict";var e={15:function(e,t,n){var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.activate=async function(e){const t=l.ChromeDevtoolsMcpOutputChannel.getInstance();t.appendLine("Extension activating..."),await k(),e.subscriptions.push(a.commands.registerCommand("antigravity.getChromeDevtoolsMcpUrl",()=>g?(t.appendLine(`Returning MCP URL: http://127.0.0.1:${g}/mcp`),`http://127.0.0.1:${g}/mcp`):null))},t.deactivate=function(){y&&(clearTimeout(y),y=null),x(),f&&(f.close(),f=null,m=null)};const a=s(n(398)),c=n(816),u=s(n(611)),l=n(584),d=n(129);let p=null;const h=new d.Mutex;let f=null,m=null,v=null,g=null,_=0,y=null;const w=5,b=1e3;let z=null;async function k(){const e=l.ChromeDevtoolsMcpOutputChannel.getInstance();try{const{createServer:t,args:n}=await async function(){const e=await h.acquire();if(!p)try{p=await import("../cdt_mcp/main.js")}catch(t){throw console.error("Failed to load cdt_mcp:",t),e(),t}return e(),p}(),o=await a.antigravityUnifiedStateSync.BrowserPreferences.getBrowserCdpPort();n.browserUrl=`http://127.0.0.1:${o}`,e.appendLine(`Configured browser URL: ${n.browserUrl}`);const r=t();z=r,e.appendLine("Created new MCP server instance");const i=new c.StreamableHTTPServerTransport;await r.connect(i),v=u.createServer((e,t)=>{i.handleRequest(e,t)}),await new Promise((t,n)=>{v.listen(0,"127.0.0.1",()=>{const o=v.address();o&&"string"!=typeof o?(g=o.port,_=0,e.appendLine(`Server ready at http://127.0.0.1:${g}/mcp`),t()):n(new Error("Failed to get server address"))}),v.on("error",n)}),v.on("error",t=>{e.appendLine(`Server error: ${t.message}`),S()})}catch(t){e.appendLine(`Failed to start server: ${t instanceof Error?t.message:String(t)}`),S()}}function S(){const e=l.ChromeDevtoolsMcpOutputChannel.getInstance();if(y&&(clearTimeout(y),y=null),_>=w)return void e.appendLine(`Max retries (${w}) reached. Giving up.`);const t=b*Math.pow(2,_);_++,e.appendLine(`⚠️ Retry ${_}/${w} in ${t}ms...`),y=setTimeout(()=>{y=null,x(),k()},t)}function x(){v&&(z?.server.close(),v.close(),v=null,g=null),z=null}},19:(e,t,n)=>{var o,r=Object.create,i=Object.defineProperty,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,l=(e,t,n,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of a(t))u.call(e,r)||r===n||i(e,r,{get:()=>t[r],enumerable:!(o=s(t,r))||o.enumerable});return e},d={};((e,t)=>{for(var n in t)i(e,n,{get:t[n],enumerable:!0})})(d,{RequestError:()=>v,createAdaptorServer:()=>J,getRequestListener:()=>L,serve:()=>V}),e.exports=(o=d,l(i({},"__esModule",{value:!0}),o));var p=n(611),h=n(675),f=n(675),m=n(203),v=class extends Error{constructor(e,t){super(e,t),this.name="RequestError"}},g=global.Request,_=class extends g{constructor(e,t){"object"==typeof e&&w in e&&(e=e[w]()),void 0!==t?.body?.getReader&&(t.duplex??="half"),super(e,t)}},y=Symbol("wrapBodyStream"),w=Symbol("getRequestCache"),b=Symbol("requestCache"),z=Symbol("incomingKey"),k=Symbol("urlKey"),S=Symbol("headersKey"),x=Symbol("abortControllerKey"),E=Symbol("getAbortController"),I={get method(){return this[z].method||"GET"},get url(){return this[k]},get headers(){return this[S]||=(e=>{const t=[],n=e.rawHeaders;for(let e=0;e<n.length;e+=2){const{[e]:o,[e+1]:r}=n;58!==o.charCodeAt(0)&&t.push([o,r])}return new Headers(t)})(this[z])},[E](){return this[w](),this[x]},[w](){return this[x]||=new AbortController,this[b]||=((e,t,n,o,r)=>{const i={method:e,headers:n,signal:r.signal};if("TRACE"===e){i.method="GET";const e=new _(t,i);return Object.defineProperty(e,"method",{get:()=>"TRACE"}),e}if("GET"!==e&&"HEAD"!==e)if("rawBody"in o&&o.rawBody instanceof Buffer)i.body=new ReadableStream({start(e){e.enqueue(o.rawBody),e.close()}});else if(o[y]){let e;i.body=new ReadableStream({async pull(t){try{e||=m.Readable.toWeb(o).getReader();const{done:n,value:r}=await e.read();n?t.close():t.enqueue(r)}catch(e){t.error(e)}}})}else i.body=m.Readable.toWeb(o);return new _(t,i)})(this.method,this[k],this.headers,this[z],this[x])}};["body","bodyUsed","cache","credentials","destination","integrity","mode","redirect","referrer","referrerPolicy","signal","keepalive"].forEach(e=>{Object.defineProperty(I,e,{get(){return this[w]()[e]}})}),["arrayBuffer","blob","clone","formData","json","text"].forEach(e=>{Object.defineProperty(I,e,{value:function(){return this[w]()[e]()}})}),Object.setPrototypeOf(I,_.prototype);var $=Symbol("responseCache"),T=Symbol("getResponseCache"),P=Symbol("cache"),R=global.Response,O=class e{#e;#t;[T](){return delete this[P],this[$]||=new R(this.#e,this.#t)}constructor(t,n){let o;if(this.#e=t,n instanceof e){const e=n[$];if(e)return this.#t=e,void this[T]();this.#t=n.#t,o=new Headers(n.#t.headers)}else this.#t=n;("string"==typeof t||void 0!==t?.getReader||t instanceof Blob||t instanceof Uint8Array)&&(o||=n?.headers||{"content-type":"text/plain; charset=UTF-8"},this[P]=[n?.status||200,t,o])}get headers(){const e=this[P];return e?(e[2]instanceof Headers||(e[2]=new Headers(e[2])),e[2]):this[T]().headers}get status(){return this[P]?.[0]??this[T]().status}get ok(){const e=this.status;return e>=200&&e<300}};async function Z(e){return Promise.race([e,Promise.resolve().then(()=>Promise.resolve(void 0))])}function j(e,t,n){const o=t=>{e.cancel(t).catch(()=>{})};return t.on("close",o),t.on("error",o),(n??e.read()).then(s,r),e.closed.finally(()=>{t.off("close",o),t.off("error",o)});function r(e){e&&t.destroy(e)}function i(){e.read().then(s,r)}function s({done:n,value:o}){try{if(n)t.end();else{if(t.write(o))return e.read().then(s,r);t.once("drain",i)}}catch(e){r(e)}}}["body","bodyUsed","redirected","statusText","trailers","type","url"].forEach(e=>{Object.defineProperty(O.prototype,e,{get(){return this[T]()[e]}})}),["arrayBuffer","blob","clone","formData","json","text"].forEach(e=>{Object.defineProperty(O.prototype,e,{value:function(){return this[T]()[e]()}})}),Object.setPrototypeOf(O,R),Object.setPrototypeOf(O.prototype,R.prototype);var C=e=>{const t={};e instanceof Headers||(e=new Headers(e??void 0));const n=[];for(const[o,r]of e)"set-cookie"===o?n.push(r):t[o]=r;return n.length>0&&(t["set-cookie"]=n),t["content-type"]??="text/plain; charset=UTF-8",t},q=((e,t,n)=>(n=null!=e?r(c(e)):{},l(e&&e.__esModule?n:i(n,"default",{value:e,enumerable:!0}),e)))(n(982)),A=global.fetch;void 0===global.crypto&&(global.crypto=q.default),global.fetch=(e,t)=>(t={compress:!1,...t},A(e,t));var M=Symbol("outgoingEnded"),N=e=>new Response(null,{status:e instanceof Error&&("TimeoutError"===e.name||"TimeoutError"===e.constructor.name)?504:500}),U=(e,t)=>{const n=e instanceof Error?e:new Error("unknown error",{cause:e});"ERR_STREAM_PREMATURE_CLOSE"===n.code?console.info("The user aborted a request."):(console.error(e),t.headersSent||t.writeHead(500,{"Content-Type":"text/plain"}),t.end(`Error: ${n.message}`),t.destroy(n))},D=e=>{"flushHeaders"in e&&e.writable&&e.flushHeaders()},F=async(e,t)=>{let[n,o,r]=e[P];r instanceof Headers&&(r=C(r)),"string"==typeof o?r["Content-Length"]=Buffer.byteLength(o):o instanceof Uint8Array?r["Content-Length"]=o.byteLength:o instanceof Blob&&(r["Content-Length"]=o.size),t.writeHead(n,r),"string"==typeof o||o instanceof Uint8Array?t.end(o):o instanceof Blob?t.end(new Uint8Array(await o.arrayBuffer())):(D(t),await(function(e,t){if(e.locked)throw new TypeError("ReadableStream is locked.");if(!t.destroyed)return j(e.getReader(),t)}(o,t)?.catch(e=>U(e,t)))),t[M]?.()},L=(e,t={})=>{const n=t.autoCleanupIncoming??!0;return!1!==t.overrideGlobalObjects&&global.Request!==_&&(Object.defineProperty(global,"Request",{value:_}),Object.defineProperty(global,"Response",{value:O})),async(o,r)=>{let i,s;try{s=((e,t)=>{const n=Object.create(I);n[z]=e;const o=e.url||"";if("/"!==o[0]&&(o.startsWith("http://")||o.startsWith("https://"))){if(e instanceof f.Http2ServerRequest)throw new v("Absolute URL for :path is not allowed in HTTP/2");try{const e=new URL(o);n[k]=e.href}catch(e){throw new v("Invalid absolute URL",{cause:e})}return n}const r=(e instanceof f.Http2ServerRequest?e.authority:e.headers.host)||t;if(!r)throw new v("Missing host header");let i;if(e instanceof f.Http2ServerRequest){if(i=e.scheme,"http"!==i&&"https"!==i)throw new v("Unsupported scheme")}else i=e.socket&&e.socket.encrypted?"https":"http";const s=new URL(`${i}://${r}${o}`);if(s.hostname.length!==r.length&&s.hostname!==r.replace(/:\d+$/,""))throw new v("Invalid host header");return n[k]=s.href,n})(o,t.hostname);let a=!n||"GET"===o.method||"HEAD"===o.method;if(a||(o[y]=!0,o.on("end",()=>{a=!0}),o instanceof h.Http2ServerRequest&&(r[M]=()=>{a||setTimeout(()=>{a||setTimeout(()=>{o.destroy(),r.destroy()})})})),r.on("close",()=>{s[x]&&(o.errored?s[x].abort(o.errored.toString()):r.writableFinished||s[x].abort("Client connection prematurely closed.")),a||setTimeout(()=>{a||setTimeout(()=>{o.destroy()})})}),i=e(s,{incoming:o,outgoing:r}),P in i)return F(i,r)}catch(e){if(i)return U(e,r);if(t.errorHandler){if(i=await t.errorHandler(s?e:(e=>e instanceof v?e:new v(e.message,{cause:e}))(e)),!i)return}else i=s?N(e):new Response(null,{status:400})}try{return await(async(e,t,n={})=>{if((e=>"function"==typeof e.then)(e))if(n.errorHandler)try{e=await e}catch(t){const o=await n.errorHandler(t);if(!o)return;e=o}else e=await e.catch(N);if(P in e)return F(e,t);const o=C(e.headers);if(e.body){const n=e.body.getReader(),r=[];let i,s=!1;if("chunked"!==o["transfer-encoding"]){let e=2;for(let t=0;t<e;t++){i||=n.read();const o=await Z(i).catch(e=>{console.error(e),s=!0});if(!o){if(1===t){await new Promise(e=>setTimeout(e)),e=3;continue}break}if(i=void 0,o.value&&r.push(o.value),o.done){s=!0;break}}s&&!("content-length"in o)&&(o["content-length"]=r.reduce((e,t)=>e+t.length,0))}t.writeHead(e.status,o),r.forEach(e=>{t.write(e)}),s?t.end():(0===r.length&&D(t),await j(n,t,i))}else o["x-hono-already-sent"]||(t.writeHead(e.status,o),t.end());t[M]?.()})(i,r,t)}catch(e){return U(e,r)}}},J=e=>{const t=e.fetch,n=L(t,{hostname:e.hostname,overrideGlobalObjects:e.overrideGlobalObjects,autoCleanupIncoming:e.autoCleanupIncoming});return(e.createServer||p.createServer)(e.serverOptions||{},n)},V=(e,t)=>{const n=J(e);return n.listen(e?.port??3e3,e.hostname,()=>{const e=n.address();t&&t(e)}),n}},129:(e,t,n)=>{n.r(t),n.d(t,{E_ALREADY_LOCKED:()=>r,E_CANCELED:()=>i,E_TIMEOUT:()=>o,Mutex:()=>c,Semaphore:()=>s,tryAcquire:()=>p,withTimeout:()=>l});const o=new Error("timeout while waiting for mutex to become available"),r=new Error("mutex already locked"),i=new Error("request for lock canceled");class s{constructor(e,t=i){this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((n,o)=>{const r={resolve:n,reject:o,weight:e,priority:t},i=a(this._queue,e=>t<=e.priority);-1===i&&e<=this._value?this._dispatchItem(r):this._queue.splice(i+1,0,r)})}runExclusive(e){return t=this,n=arguments,r=function*(e,t=1,n=0){const[o,r]=yield this.acquire(t,n);try{return yield e(o)}finally{r()}},new((o=void 0)||(o=Promise))(function(e,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(s,a)}c((r=r.apply(t,n||[])).next())});var t,n,o,r}waitForUnlock(e=1,t=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(n=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),function(e,t){const n=a(e,e=>t.priority<=e.priority);e.splice(n+1,0,t)}(this._weightedWaiters[e-1],{resolve:n,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])}_newReleaser(e){let t=!1;return()=>{t||(t=!0,this.release(e))}}_drainUnlockWaiters(){if(0===this._queue.length)for(let e=this._value;e>0;e--){const t=this._weightedWaiters[e-1];t&&(t.forEach(e=>e.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let t=this._value;t>0;t--){const n=this._weightedWaiters[t-1];if(!n)continue;const o=n.findIndex(t=>t.priority<=e);(-1===o?n:n.splice(0,o)).forEach(e=>e.resolve())}}}_couldLockImmediately(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value}}function a(e,t){for(let n=e.length-1;n>=0;n--)if(t(e[n]))return n;return-1}class c{constructor(e){this._semaphore=new s(1,e)}acquire(){return e=this,t=arguments,o=function*(e=0){const[,t]=yield this._semaphore.acquire(1,e);return t},new((n=void 0)||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())});var e,t,n,o}runExclusive(e,t=0){return this._semaphore.runExclusive(()=>e(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}var u=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(s,a)}c((o=o.apply(e,t||[])).next())})};function l(e,t,n=o){return{acquire:(o,r)=>{let i;if(d(e)?i=o:(i=void 0,r=o),void 0!==i&&i<=0)throw new Error(`invalid weight ${i}: must be positive`);return new Promise((o,s)=>u(this,void 0,void 0,function*(){let a=!1;const c=setTimeout(()=>{a=!0,s(n)},t);try{const t=yield d(e)?e.acquire(i,r):e.acquire(r);a?(Array.isArray(t)?t[1]:t)():(clearTimeout(c),o(t))}catch(e){a||(clearTimeout(c),s(e))}}))},runExclusive(e,t,n){return u(this,void 0,void 0,function*(){let o=()=>{};try{const r=yield this.acquire(t,n);return Array.isArray(r)?(o=r[1],yield e(r[0])):(o=r,yield e())}finally{o()}})},release(t){e.release(t)},cancel:()=>e.cancel(),waitForUnlock:(o,r)=>{let i;if(d(e)?i=o:(i=void 0,r=o),void 0!==i&&i<=0)throw new Error(`invalid weight ${i}: must be positive`);return new Promise((o,s)=>{const a=setTimeout(()=>s(n),t);(d(e)?e.waitForUnlock(i,r):e.waitForUnlock(r)).then(()=>{clearTimeout(a),o()})})},isLocked:()=>e.isLocked(),getValue:()=>e.getValue(),setValue:t=>e.setValue(t)}}function d(e){return void 0!==e.getValue}function p(e,t=r){return l(e,0,t)}},203:e=>{e.exports=require("stream")},398:e=>{e.exports=require("vscode")},584:function(e,t,n){var o,r=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,o,r)}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||(o=function(e){return o=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},o(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=o(e),s=0;s<n.length;s++)"default"!==n[s]&&r(t,e,n[s]);return i(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeDevtoolsMcpOutputChannel=void 0;const a=s(n(398));class c{static getInstance(){return c.instance||(this.instance=a.window.createOutputChannel("Chrome DevTools MCP",{log:!0})),this.instance}}t.ChromeDevtoolsMcpOutputChannel=c},611:e=>{e.exports=require("http")},675:e=>{e.exports=require("http2")},816:(e,t,n)=>{n.r(t),n.d(t,{StreamableHTTPServerTransport:()=>ds});var o=n(19);function r(e,t,n){function o(n,o){var r;Object.defineProperty(n,"_zod",{value:n._zod??{},enumerable:!1}),(r=n._zod).traits??(r.traits=new Set),n._zod.traits.add(e),t(n,o);for(const e in s.prototype)e in n||Object.defineProperty(n,e,{value:s.prototype[e].bind(n)});n._zod.constr=s,n._zod.def=o}const r=n?.Parent??Object;class i extends r{}function s(e){var t;const r=n?.Parent?new i:this;o(r,e),(t=r._zod).deferred??(t.deferred=[]);for(const e of r._zod.deferred)e();return r}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(s,"init",{value:o}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!(n?.Parent&&t instanceof n.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}Object.freeze({status:"aborted"}),Symbol("zod_brand");class i extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const s={};function a(e){return e&&Object.assign(s,e),s}const c=/^[cC][^\s-]{8,}$/,u=/^[0-9a-z]+$/,l=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,d=/^[0-9a-vA-V]{20}$/,p=/^[A-Za-z0-9]{27}$/,h=/^[a-zA-Z0-9_-]{21}$/,f=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,m=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,v=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,g=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,y=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,w=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,b=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,z=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,k=/^[A-Za-z0-9_-]*$/,S=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,x=/^\+(?:[0-9]){6,14}[0-9]$/,E="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",I=new RegExp(`^${E}$`);function $(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}const T=/^\d+$/,P=/^-?\d+(?:\.\d+)?/i,R=/true|false/i,O=/null/i,Z=/^[^A-Z]*$/,j=/^[^a-z]*$/;function C(e,t){return"bigint"==typeof t?t.toString():t}function q(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function A(e){return null==e}function M(e){const t=e.startsWith("^")?1:0,n=e.endsWith("$")?e.length-1:e.length;return e.slice(t,n)}function N(e,t,n){Object.defineProperty(e,t,{get(){{const o=n();return e[t]=o,o}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function U(e,t,n){Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})}function D(e){return JSON.stringify(e)}const F=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function L(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}const J=q(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return new Function(""),!0}catch(e){return!1}});function V(e){if(!1===L(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==L(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}const H=new Set(["string","number","symbol"]);function B(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function W(e,t,n){const o=new e._zod.constr(t??e._zod.def);return t&&!n?.parent||(o._zod.parent=e),o}function G(e){const t=e;if(!t)return{};if("string"==typeof t)return{error:()=>t};if(void 0!==t?.message){if(void 0!==t?.error)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,"string"==typeof t.error?{...t,error:()=>t.error}:t}new Set(["string","number","bigint","boolean","symbol","undefined"]);const K={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Y(e,t=0){for(let n=t;n<e.issues.length;n++)if(!0!==e.issues[n]?.continue)return!0;return!1}function X(e,t){return t.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(e),t})}function Q(e){return"string"==typeof e?e:e?.message}function ee(e,t,n){const o={...e,path:e.path??[]};if(!e.message){const r=Q(e.inst?._zod.def?.error?.(e))??Q(t?.error?.(e))??Q(n.customError?.(e))??Q(n.localeError?.(e))??"Invalid input";o.message=r}return delete o.inst,delete o.continue,t?.reportInput||delete o.input,o}function te(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function ne(...e){const[t,n,o]=e;return"string"==typeof t?{message:t,code:"custom",input:n,inst:o}:{...t}}const oe=r("$ZodCheck",(e,t)=>{var n;e._zod??(e._zod={}),e._zod.def=t,(n=e._zod).onattach??(n.onattach=[])}),re={number:"number",bigint:"bigint",object:"date"},ie=r("$ZodCheckLessThan",(e,t)=>{oe.init(e,t);const n=re[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,o=(t.inclusive?n.maximum:n.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?n.maximum=t.value:n.exclusiveMaximum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value<=t.value:o.value<t.value)||o.issues.push({origin:n,code:"too_big",maximum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),se=r("$ZodCheckGreaterThan",(e,t)=>{oe.init(e,t);const n=re[typeof t.value];e._zod.onattach.push(e=>{const n=e._zod.bag,o=(t.inclusive?n.minimum:n.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?n.minimum=t.value:n.exclusiveMinimum=t.value)}),e._zod.check=o=>{(t.inclusive?o.value>=t.value:o.value>t.value)||o.issues.push({origin:n,code:"too_small",minimum:t.value,input:o.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ae=r("$ZodCheckMultipleOf",(e,t)=>{oe.init(e,t),e._zod.onattach.push(e=>{var n;(n=e._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=n=>{if(typeof n.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof n.value?n.value%t.value===BigInt(0):0===function(e,t){const n=(e.toString().split(".")[1]||"").length,o=(t.toString().split(".")[1]||"").length,r=n>o?n:o;return Number.parseInt(e.toFixed(r).replace(".",""))%Number.parseInt(t.toFixed(r).replace(".",""))/10**r}(n.value,t.value))||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:t.value,input:n.value,inst:e,continue:!t.abort})}}),ce=r("$ZodCheckNumberFormat",(e,t)=>{oe.init(e,t),t.format=t.format||"float64";const n=t.format?.includes("int"),o=n?"int":"number",[r,i]=K[t.format];e._zod.onattach.push(e=>{const o=e._zod.bag;o.format=t.format,o.minimum=r,o.maximum=i,n&&(o.pattern=T)}),e._zod.check=s=>{const a=s.value;if(n){if(!Number.isInteger(a))return void s.issues.push({expected:o,format:t.format,code:"invalid_type",input:a,inst:e});if(!Number.isSafeInteger(a))return void(a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:o,continue:!t.abort}))}a<r&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!t.abort}),a>i&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:i,inst:e})}}),ue=r("$ZodCheckMaxLength",(e,t)=>{var n;oe.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!A(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<n&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const o=n.value;if(o.length<=t.maximum)return;const r=te(o);n.issues.push({origin:r,code:"too_big",maximum:t.maximum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),le=r("$ZodCheckMinLength",(e,t)=>{var n;oe.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!A(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>n&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const o=n.value;if(o.length>=t.minimum)return;const r=te(o);n.issues.push({origin:r,code:"too_small",minimum:t.minimum,inclusive:!0,input:o,inst:e,continue:!t.abort})}}),de=r("$ZodCheckLengthEquals",(e,t)=>{var n;oe.init(e,t),(n=e._zod.def).when??(n.when=e=>{const t=e.value;return!A(t)&&void 0!==t.length}),e._zod.onattach.push(e=>{const n=e._zod.bag;n.minimum=t.length,n.maximum=t.length,n.length=t.length}),e._zod.check=n=>{const o=n.value,r=o.length;if(r===t.length)return;const i=te(o),s=r>t.length;n.issues.push({origin:i,...s?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),pe=r("$ZodCheckStringFormat",(e,t)=>{var n,o;oe.init(e,t),e._zod.onattach.push(e=>{const n=e._zod.bag;n.format=t.format,t.pattern&&(n.patterns??(n.patterns=new Set),n.patterns.add(t.pattern))}),t.pattern?(n=e._zod).check??(n.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:t.format,input:n.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(o=e._zod).check??(o.check=()=>{})}),he=r("$ZodCheckRegex",(e,t)=>{pe.init(e,t),e._zod.check=n=>{t.pattern.lastIndex=0,t.pattern.test(n.value)||n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),fe=r("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Z),pe.init(e,t)}),me=r("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=j),pe.init(e,t)}),ve=r("$ZodCheckIncludes",(e,t)=>{oe.init(e,t);const n=B(t.includes),o=new RegExp("number"==typeof t.position?`^.{${t.position}}${n}`:n);t.pattern=o,e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(o)}),e._zod.check=n=>{n.value.includes(t.includes,t.position)||n.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:n.value,inst:e,continue:!t.abort})}}),ge=r("$ZodCheckStartsWith",(e,t)=>{oe.init(e,t);const n=new RegExp(`^${B(t.prefix)}.*`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),_e=r("$ZodCheckEndsWith",(e,t)=>{oe.init(e,t);const n=new RegExp(`.*${B(t.suffix)}$`);t.pattern??(t.pattern=n),e._zod.onattach.push(e=>{const t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(n)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),ye=r("$ZodCheckOverwrite",(e,t)=>{oe.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class we{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e)return e(this,{execution:"sync"}),void e(this,{execution:"async"});const t=e.split("\n").filter(e=>e),n=Math.min(...t.map(e=>e.length-e.trimStart().length)),o=t.map(e=>e.slice(n)).map(e=>" ".repeat(2*this.indent)+e);for(const e of o)this.content.push(e)}compile(){const e=Function,t=this?.args;return new e(...t,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}const be=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,C,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},ze=r("$ZodError",be),ke=r("$ZodError",be,{Parent:Error}),Se=e=>(t,n,o,r)=>{const s=o?Object.assign(o,{async:!1}):{async:!1},c=t._zod.run({value:n,issues:[]},s);if(c instanceof Promise)throw new i;if(c.issues.length){const t=new(r?.Err??e)(c.issues.map(e=>ee(e,s,a())));throw F(t,r?.callee),t}return c.value},xe=e=>async(t,n,o,r)=>{const i=o?Object.assign(o,{async:!0}):{async:!0};let s=t._zod.run({value:n,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const t=new(r?.Err??e)(s.issues.map(e=>ee(e,i,a())));throw F(t,r?.callee),t}return s.value},Ee=e=>(t,n,o)=>{const r=o?{...o,async:!1}:{async:!1},s=t._zod.run({value:n,issues:[]},r);if(s instanceof Promise)throw new i;return s.issues.length?{success:!1,error:new(e??ze)(s.issues.map(e=>ee(e,r,a())))}:{success:!0,data:s.value}},Ie=Ee(ke),$e=e=>async(t,n,o)=>{const r=o?Object.assign(o,{async:!0}):{async:!0};let i=t._zod.run({value:n,issues:[]},r);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>ee(e,r,a())))}:{success:!0,data:i.value}},Te=$e(ke),Pe={major:4,minor:0,patch:0},Re=r("$ZodType",(e,t)=>{var n;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=Pe;const o=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&o.unshift(e);for(const t of o)for(const n of t._zod.onattach)n(e);if(0===o.length)(n=e._zod).deferred??(n.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,n)=>{let o,r=Y(e);for(const s of t){if(s._zod.def.when){if(!s._zod.def.when(e))continue}else if(r)continue;const t=e.issues.length,a=s._zod.check(e);if(a instanceof Promise&&!1===n?.async)throw new i;if(o||a instanceof Promise)o=(o??Promise.resolve()).then(async()=>{await a,e.issues.length!==t&&(r||(r=Y(e,t)))});else{if(e.issues.length===t)continue;r||(r=Y(e,t))}}return o?o.then(()=>e):e};e._zod.run=(n,r)=>{const s=e._zod.parse(n,r);if(s instanceof Promise){if(!1===r.async)throw new i;return s.then(e=>t(e,o,r))}return t(s,o,r)}}e["~standard"]={validate:t=>{try{const n=Ie(e,t);return n.success?{value:n.data}:{issues:n.error?.issues}}catch(n){return Te(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),Oe=r("$ZodString",(e,t)=>{var n;Re.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??(n=e._zod.bag,new RegExp(`^${n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*"}$`)),e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=String(n.value)}catch(o){}return"string"==typeof n.value||n.issues.push({expected:"string",code:"invalid_type",input:n.value,inst:e}),n}}),Ze=r("$ZodStringFormat",(e,t)=>{pe.init(e,t),Oe.init(e,t)}),je=r("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=m),Ze.init(e,t)}),Ce=r("$ZodUUID",(e,t)=>{if(t.version){const e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=v(e))}else t.pattern??(t.pattern=v());Ze.init(e,t)}),qe=r("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=g),Ze.init(e,t)}),Ae=r("$ZodURL",(e,t)=>{Ze.init(e,t),e._zod.check=n=>{try{const o=n.value,r=new URL(o),i=r.href;return t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(r.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:S.source,input:n.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:n.value,inst:e,continue:!t.abort})),void(!o.endsWith("/")&&i.endsWith("/")?n.value=i.slice(0,-1):n.value=i)}catch(o){n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:e,continue:!t.abort})}}}),Me=r("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Ze.init(e,t)}),Ne=r("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=h),Ze.init(e,t)}),Ue=r("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=c),Ze.init(e,t)}),De=r("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=u),Ze.init(e,t)}),Fe=r("$ZodULID",(e,t)=>{t.pattern??(t.pattern=l),Ze.init(e,t)}),Le=r("$ZodXID",(e,t)=>{t.pattern??(t.pattern=d),Ze.init(e,t)}),Je=r("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=p),Ze.init(e,t)}),Ve=r("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){const t=$({precision:e.precision}),n=["Z"];e.local&&n.push(""),e.offset&&n.push("([+-]\\d{2}:\\d{2})");const o=`${t}(?:${n.join("|")})`;return new RegExp(`^${E}T(?:${o})$`)}(t)),Ze.init(e,t)}),He=r("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=I),Ze.init(e,t)}),Be=r("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=new RegExp(`^${$(t)}$`)),Ze.init(e,t)}),We=r("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=f),Ze.init(e,t)}),Ge=r("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=_),Ze.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),Ke=r("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=y),Ze.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:e,continue:!t.abort})}}}),Ye=r("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=w),Ze.init(e,t)}),Xe=r("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=b),Ze.init(e,t),e._zod.check=n=>{const[o,r]=n.value.split("/");try{if(!r)throw new Error;const e=Number(r);if(`${e}`!==r)throw new Error;if(e<0||e>128)throw new Error;new URL(`http://[${o}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:e,continue:!t.abort})}}});function Qe(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}const et=r("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=z),Ze.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=n=>{Qe(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:e,continue:!t.abort})}}),tt=r("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=k),Ze.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=n=>{(function(e){if(!k.test(e))return!1;const t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return Qe(t.padEnd(4*Math.ceil(t.length/4),"="))})(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:e,continue:!t.abort})}}),nt=r("$ZodE164",(e,t)=>{t.pattern??(t.pattern=x),Ze.init(e,t)}),ot=r("$ZodJWT",(e,t)=>{Ze.init(e,t),e._zod.check=n=>{(function(e,t=null){try{const n=e.split(".");if(3!==n.length)return!1;const[o]=n;if(!o)return!1;const r=JSON.parse(atob(o));return!("typ"in r&&"JWT"!==r?.typ||!r.alg||t&&(!("alg"in r)||r.alg!==t))}catch{return!1}})(n.value,t.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:e,continue:!t.abort})}}),rt=r("$ZodNumber",(e,t)=>{Re.init(e,t),e._zod.pattern=e._zod.bag.pattern??P,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=Number(n.value)}catch(e){}const r=n.value;if("number"==typeof r&&!Number.isNaN(r)&&Number.isFinite(r))return n;const i="number"==typeof r?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...i?{received:i}:{}}),n}}),it=r("$ZodNumber",(e,t)=>{ce.init(e,t),rt.init(e,t)}),st=r("$ZodBoolean",(e,t)=>{Re.init(e,t),e._zod.pattern=R,e._zod.parse=(n,o)=>{if(t.coerce)try{n.value=Boolean(n.value)}catch(e){}const r=n.value;return"boolean"==typeof r||n.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),n}}),at=r("$ZodNull",(e,t)=>{Re.init(e,t),e._zod.pattern=O,e._zod.values=new Set([null]),e._zod.parse=(t,n)=>{const o=t.value;return null===o||t.issues.push({expected:"null",code:"invalid_type",input:o,inst:e}),t}}),ct=r("$ZodUnknown",(e,t)=>{Re.init(e,t),e._zod.parse=e=>e}),ut=r("$ZodNever",(e,t)=>{Re.init(e,t),e._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function lt(e,t,n){e.issues.length&&t.issues.push(...X(n,e.issues)),t.value[n]=e.value}const dt=r("$ZodArray",(e,t)=>{Re.init(e,t),e._zod.parse=(n,o)=>{const r=n.value;if(!Array.isArray(r))return n.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),n;n.value=Array(r.length);const i=[];for(let e=0;e<r.length;e++){const s=r[e],a=t.element._zod.run({value:s,issues:[]},o);a instanceof Promise?i.push(a.then(t=>lt(t,n,e))):lt(a,n,e)}return i.length?Promise.all(i).then(()=>n):n}});function pt(e,t,n){e.issues.length&&t.issues.push(...X(n,e.issues)),t.value[n]=e.value}function ht(e,t,n,o){e.issues.length?void 0===o[n]?t.value[n]=n in o?void 0:e.value:t.issues.push(...X(n,e.issues)):void 0===e.value?n in o&&(t.value[n]=void 0):t.value[n]=e.value}const ft=r("$ZodObject",(e,t)=>{Re.init(e,t);const n=q(()=>{const e=Object.keys(t.shape);for(const n of e)if(!(t.shape[n]instanceof Re))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);const n=(o=t.shape,Object.keys(o).filter(e=>"optional"===o[e]._zod.optin&&"optional"===o[e]._zod.optout));var o;return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}});let o;N(e._zod,"propValues",()=>{const e=t.shape,n={};for(const t in e){const o=e[t]._zod;if(o.values){n[t]??(n[t]=new Set);for(const e of o.values)n[t].add(e)}}return n});const r=L,i=!s.jitless,a=i&&J.value,c=t.catchall;let u;e._zod.parse=(s,l)=>{u??(u=n.value);const d=s.value;if(!r(d))return s.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),s;const p=[];if(i&&a&&!1===l?.async&&!0!==l.jitless)o||(o=(e=>{const t=new we(["shape","payload","ctx"]),o=n.value,r=e=>{const t=D(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");const i=Object.create(null);let s=0;for(const e of o.keys)i[e]="key_"+s++;t.write("const newResult = {}");for(const e of o.keys)if(o.optionalKeys.has(e)){const n=i[e];t.write(`const ${n} = ${r(e)};`);const o=D(e);t.write(`\n        if (${n}.issues.length) {\n          if (input[${o}] === undefined) {\n            if (${o} in input) {\n              newResult[${o}] = undefined;\n            }\n          } else {\n            payload.issues = payload.issues.concat(\n              ${n}.issues.map((iss) => ({\n                ...iss,\n                path: iss.path ? [${o}, ...iss.path] : [${o}],\n              }))\n            );\n          }\n        } else if (${n}.value === undefined) {\n          if (${o} in input) newResult[${o}] = undefined;\n        } else {\n          newResult[${o}] = ${n}.value;\n        }\n        `)}else{const n=i[e];t.write(`const ${n} = ${r(e)};`),t.write(`\n          if (${n}.issues.length) payload.issues = payload.issues.concat(${n}.issues.map(iss => ({\n            ...iss,\n            path: iss.path ? [${D(e)}, ...iss.path] : [${D(e)}]\n          })));`),t.write(`newResult[${D(e)}] = ${n}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");const a=t.compile();return(t,n)=>a(e,t,n)})(t.shape)),s=o(s,l);else{s.value={};const e=u.shape;for(const t of u.keys){const n=e[t],o=n._zod.run({value:d[t],issues:[]},l),r="optional"===n._zod.optin&&"optional"===n._zod.optout;o instanceof Promise?p.push(o.then(e=>r?ht(e,s,t,d):pt(e,s,t))):r?ht(o,s,t,d):pt(o,s,t)}}if(!c)return p.length?Promise.all(p).then(()=>s):s;const h=[],f=u.keySet,m=c._zod,v=m.def.type;for(const e of Object.keys(d)){if(f.has(e))continue;if("never"===v){h.push(e);continue}const t=m.run({value:d[e],issues:[]},l);t instanceof Promise?p.push(t.then(t=>pt(t,s,e))):pt(t,s,e)}return h.length&&s.issues.push({code:"unrecognized_keys",keys:h,input:d,inst:e}),p.length?Promise.all(p).then(()=>s):s}});function mt(e,t,n,o){for(const n of e)if(0===n.issues.length)return t.value=n.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:n,errors:e.map(e=>e.issues.map(e=>ee(e,o,a())))}),t}const vt=r("$ZodUnion",(e,t)=>{Re.init(e,t),N(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),N(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),N(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),N(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){const e=t.options.map(e=>e._zod.pattern);return new RegExp(`^(${e.map(e=>M(e.source)).join("|")})$`)}}),e._zod.parse=(n,o)=>{let r=!1;const i=[];for(const e of t.options){const t=e._zod.run({value:n.value,issues:[]},o);if(t instanceof Promise)i.push(t),r=!0;else{if(0===t.issues.length)return t;i.push(t)}}return r?Promise.all(i).then(t=>mt(t,n,e,o)):mt(i,n,e,o)}}),gt=r("$ZodDiscriminatedUnion",(e,t)=>{vt.init(e,t);const n=e._zod.parse;N(e._zod,"propValues",()=>{const e={};for(const n of t.options){const o=n._zod.propValues;if(!o||0===Object.keys(o).length)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(n)}"`);for(const[t,n]of Object.entries(o)){e[t]||(e[t]=new Set);for(const o of n)e[t].add(o)}}return e});const o=q(()=>{const e=t.options,n=new Map;for(const o of e){const e=o._zod.propValues[t.discriminator];if(!e||0===e.size)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const t of e){if(n.has(t))throw new Error(`Duplicate discriminator value "${String(t)}"`);n.set(t,o)}}return n});e._zod.parse=(r,i)=>{const s=r.value;if(!L(s))return r.issues.push({code:"invalid_type",expected:"object",input:s,inst:e}),r;const a=o.value.get(s?.[t.discriminator]);return a?a._zod.run(r,i):t.unionFallback?n(r,i):(r.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:s,path:[t.discriminator],inst:e}),r)}}),_t=r("$ZodIntersection",(e,t)=>{Re.init(e,t),e._zod.parse=(e,n)=>{const o=e.value,r=t.left._zod.run({value:o,issues:[]},n),i=t.right._zod.run({value:o,issues:[]},n);return r instanceof Promise||i instanceof Promise?Promise.all([r,i]).then(([t,n])=>wt(e,t,n)):wt(e,r,i)}});function yt(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e===+t)return{valid:!0,data:e};if(V(e)&&V(t)){const n=Object.keys(t),o=Object.keys(e).filter(e=>-1!==n.indexOf(e)),r={...e,...t};for(const n of o){const o=yt(e[n],t[n]);if(!o.valid)return{valid:!1,mergeErrorPath:[n,...o.mergeErrorPath]};r[n]=o.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let o=0;o<e.length;o++){const r=yt(e[o],t[o]);if(!r.valid)return{valid:!1,mergeErrorPath:[o,...r.mergeErrorPath]};n.push(r.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function wt(e,t,n){if(t.issues.length&&e.issues.push(...t.issues),n.issues.length&&e.issues.push(...n.issues),Y(e))return e;const o=yt(t.value,n.value);if(!o.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(o.mergeErrorPath)}`);return e.value=o.data,e}const bt=r("$ZodRecord",(e,t)=>{Re.init(e,t),e._zod.parse=(n,o)=>{const r=n.value;if(!V(r))return n.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),n;const i=[];if(t.keyType._zod.values){const s=t.keyType._zod.values;n.value={};for(const e of s)if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){const s=t.valueType._zod.run({value:r[e],issues:[]},o);s instanceof Promise?i.push(s.then(t=>{t.issues.length&&n.issues.push(...X(e,t.issues)),n.value[e]=t.value})):(s.issues.length&&n.issues.push(...X(e,s.issues)),n.value[e]=s.value)}let a;for(const e in r)s.has(e)||(a=a??[],a.push(e));a&&a.length>0&&n.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:a})}else{n.value={};for(const s of Reflect.ownKeys(r)){if("__proto__"===s)continue;const c=t.keyType._zod.run({value:s,issues:[]},o);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){n.issues.push({origin:"record",code:"invalid_key",issues:c.issues.map(e=>ee(e,o,a())),input:s,path:[s],inst:e}),n.value[c.value]=c.value;continue}const u=t.valueType._zod.run({value:r[s],issues:[]},o);u instanceof Promise?i.push(u.then(e=>{e.issues.length&&n.issues.push(...X(s,e.issues)),n.value[c.value]=e.value})):(u.issues.length&&n.issues.push(...X(s,u.issues)),n.value[c.value]=u.value)}}return i.length?Promise.all(i).then(()=>n):n}}),zt=r("$ZodEnum",(e,t)=>{Re.init(e,t);const n=function(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,n])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries);e._zod.values=new Set(n),e._zod.pattern=new RegExp(`^(${n.filter(e=>H.has(typeof e)).map(e=>"string"==typeof e?B(e):e.toString()).join("|")})$`),e._zod.parse=(t,o)=>{const r=t.value;return e._zod.values.has(r)||t.issues.push({code:"invalid_value",values:n,input:r,inst:e}),t}}),kt=r("$ZodLiteral",(e,t)=>{Re.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(e=>"string"==typeof e?B(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(n,o)=>{const r=n.value;return e._zod.values.has(r)||n.issues.push({code:"invalid_value",values:t.values,input:r,inst:e}),n}}),St=r("$ZodTransform",(e,t)=>{Re.init(e,t),e._zod.parse=(e,n)=>{const o=t.transform(e.value,e);if(n.async)return(o instanceof Promise?o:Promise.resolve(o)).then(t=>(e.value=t,e));if(o instanceof Promise)throw new i;return e.value=o,e}}),xt=r("$ZodOptional",(e,t)=>{Re.init(e,t),e._zod.optin="optional",e._zod.optout="optional",N(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),N(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${M(e.source)})?$`):void 0}),e._zod.parse=(e,n)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,n):void 0===e.value?e:t.innerType._zod.run(e,n)}),Et=r("$ZodNullable",(e,t)=>{Re.init(e,t),N(e._zod,"optin",()=>t.innerType._zod.optin),N(e._zod,"optout",()=>t.innerType._zod.optout),N(e._zod,"pattern",()=>{const e=t.innerType._zod.pattern;return e?new RegExp(`^(${M(e.source)}|null)$`):void 0}),N(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,n)=>null===e.value?e:t.innerType._zod.run(e,n)}),It=r("$ZodDefault",(e,t)=>{Re.init(e,t),e._zod.optin="optional",N(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{if(void 0===e.value)return e.value=t.defaultValue,e;const o=t.innerType._zod.run(e,n);return o instanceof Promise?o.then(e=>$t(e,t)):$t(o,t)}});function $t(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}const Tt=r("$ZodPrefault",(e,t)=>{Re.init(e,t),e._zod.optin="optional",N(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,n))}),Pt=r("$ZodNonOptional",(e,t)=>{Re.init(e,t),N(e._zod,"values",()=>{const e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(n,o)=>{const r=t.innerType._zod.run(n,o);return r instanceof Promise?r.then(t=>Rt(t,e)):Rt(r,e)}});function Rt(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const Ot=r("$ZodCatch",(e,t)=>{Re.init(e,t),e._zod.optin="optional",N(e._zod,"optout",()=>t.innerType._zod.optout),N(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,n)=>{const o=t.innerType._zod.run(e,n);return o instanceof Promise?o.then(o=>(e.value=o.value,o.issues.length&&(e.value=t.catchValue({...e,error:{issues:o.issues.map(e=>ee(e,n,a()))},input:e.value}),e.issues=[]),e)):(e.value=o.value,o.issues.length&&(e.value=t.catchValue({...e,error:{issues:o.issues.map(e=>ee(e,n,a()))},input:e.value}),e.issues=[]),e)}}),Zt=r("$ZodPipe",(e,t)=>{Re.init(e,t),N(e._zod,"values",()=>t.in._zod.values),N(e._zod,"optin",()=>t.in._zod.optin),N(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,n)=>{const o=t.in._zod.run(e,n);return o instanceof Promise?o.then(e=>jt(e,t,n)):jt(o,t,n)}});function jt(e,t,n){return Y(e)?e:t.out._zod.run({value:e.value,issues:e.issues},n)}const Ct=r("$ZodReadonly",(e,t)=>{Re.init(e,t),N(e._zod,"propValues",()=>t.innerType._zod.propValues),N(e._zod,"values",()=>t.innerType._zod.values),N(e._zod,"optin",()=>t.innerType._zod.optin),N(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,n)=>{const o=t.innerType._zod.run(e,n);return o instanceof Promise?o.then(qt):qt(o)}});function qt(e){return e.value=Object.freeze(e.value),e}const At=r("$ZodCustom",(e,t)=>{oe.init(e,t),Re.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=n=>{const o=n.value,r=t.fn(o);if(r instanceof Promise)return r.then(t=>Mt(t,n,o,e));Mt(r,n,o,e)}});function Mt(e,t,n,o){if(!e){const e={code:"custom",input:n,inst:o,path:[...o._zod.def.path??[]],continue:!o._zod.def.abort};o._zod.def.params&&(e.params=o._zod.def.params),t.issues.push(ne(e))}}Symbol("ZodOutput"),Symbol("ZodInput");class Nt{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){const n=t[0];if(this._map.set(e,n),n&&"object"==typeof n&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const n={...this.get(t)??{}};return delete n.id,{...n,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function Ut(){return new Nt}const Dt=Ut();function Ft(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...G(t)})}function Lt(e,t){return new ie({check:"less_than",...G(t),value:e,inclusive:!1})}function Jt(e,t){return new ie({check:"less_than",...G(t),value:e,inclusive:!0})}function Vt(e,t){return new se({check:"greater_than",...G(t),value:e,inclusive:!1})}function Ht(e,t){return new se({check:"greater_than",...G(t),value:e,inclusive:!0})}function Bt(e,t){return new ae({check:"multiple_of",...G(t),value:e})}function Wt(e,t){return new ue({check:"max_length",...G(t),maximum:e})}function Gt(e,t){return new le({check:"min_length",...G(t),minimum:e})}function Kt(e,t){return new de({check:"length_equals",...G(t),length:e})}function Yt(e){return new ye({check:"overwrite",tx:e})}const Xt=r("ZodISODateTime",(e,t)=>{Ve.init(e,t),fn.init(e,t)});function Qt(e){return function(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...G(t)})}(Xt,e)}const en=r("ZodISODate",(e,t)=>{He.init(e,t),fn.init(e,t)});const tn=r("ZodISOTime",(e,t)=>{Be.init(e,t),fn.init(e,t)});const nn=r("ZodISODuration",(e,t)=>{We.init(e,t),fn.init(e,t)});const on=(e,t)=>{ze.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>function(e,t){const n=t||function(e){return e.message},o={_errors:[]},r=e=>{for(const t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>r({issues:e}));else if("invalid_key"===t.code)r({issues:t.issues});else if("invalid_element"===t.code)r({issues:t.issues});else if(0===t.path.length)o._errors.push(n(t));else{let e=o,r=0;for(;r<t.path.length;){const o=t.path[r];r===t.path.length-1?(e[o]=e[o]||{_errors:[]},e[o]._errors.push(n(t))):e[o]=e[o]||{_errors:[]},e=e[o],r++}}};return r(e),o}(e,t)},flatten:{value:t=>function(e,t=e=>e.message){const n={},o=[];for(const r of e.issues)r.path.length>0?(n[r.path[0]]=n[r.path[0]]||[],n[r.path[0]].push(t(r))):o.push(t(r));return{formErrors:o,fieldErrors:n}}(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})},rn=(r("ZodError",on),r("ZodError",on,{Parent:Error})),sn=Se(rn),an=xe(rn),cn=Ee(rn),un=$e(rn),ln=r("ZodType",(e,t)=>(Re.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...n)=>e.clone({...t,checks:[...t.checks??[],...n.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,n)=>W(e,t,n),e.brand=()=>e,e.register=(t,n)=>(t.add(e,n),e),e.parse=(t,n)=>sn(e,t,n,{callee:e.parse}),e.safeParse=(t,n)=>cn(e,t,n),e.parseAsync=async(t,n)=>an(e,t,n,{callee:e.parseAsync}),e.safeParseAsync=async(t,n)=>un(e,t,n),e.spa=e.safeParseAsync,e.refine=(t,n)=>e.check(function(e,t={}){return function(e,t,n){return new e({type:"custom",check:"custom",fn:t,...G(n)})}(zo,e,t)}(t,n)),e.superRefine=t=>e.check(function(e){const t=function(e){const t=new oe({check:"custom"});return t._zod.check=e,t}(n=>(n.addIssue=e=>{if("string"==typeof e)n.issues.push(ne(e,n.value,t._zod.def));else{const o=e;o.fatal&&(o.continue=!1),o.code??(o.code="custom"),o.input??(o.input=n.value),o.inst??(o.inst=t),o.continue??(o.continue=!t._zod.def.abort),n.issues.push(ne(o))}},e(n.value,n)));return t}(t)),e.overwrite=t=>e.check(Yt(t)),e.optional=()=>po(e),e.nullable=()=>fo(e),e.nullish=()=>po(fo(e)),e.nonoptional=t=>function(e,t){return new go({type:"nonoptional",innerType:e,...G(t)})}(e,t),e.array=()=>Hn(e),e.or=t=>Yn([e,t]),e.and=t=>to(e,t),e.transform=t=>wo(e,uo(t)),e.default=t=>{return n=t,new mo({type:"default",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.prefault=t=>{return n=t,new vo({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof n?n():n}});var n},e.catch=t=>{return new _o({type:"catch",innerType:e,catchValue:"function"==typeof(n=t)?n:()=>n});var n},e.pipe=t=>wo(e,t),e.readonly=()=>new bo({type:"readonly",innerType:e}),e.describe=t=>{const n=e.clone();return Dt.add(n,{description:t}),n},Object.defineProperty(e,"description",{get:()=>Dt.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return Dt.get(e);const n=e.clone();return Dt.add(n,t[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),dn=r("_ZodString",(e,t)=>{Oe.init(e,t),ln.init(e,t);const n=e._zod.bag;e.format=n.format??null,e.minLength=n.minimum??null,e.maxLength=n.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new he({check:"string_format",format:"regex",...G(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new ve({check:"string_format",format:"includes",...G(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new ge({check:"string_format",format:"starts_with",...G(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new _e({check:"string_format",format:"ends_with",...G(t),suffix:e})}(...t)),e.min=(...t)=>e.check(Gt(...t)),e.max=(...t)=>e.check(Wt(...t)),e.length=(...t)=>e.check(Kt(...t)),e.nonempty=(...t)=>e.check(Gt(1,...t)),e.lowercase=t=>e.check(function(e){return new fe({check:"string_format",format:"lowercase",...G(e)})}(t)),e.uppercase=t=>e.check(function(e){return new me({check:"string_format",format:"uppercase",...G(e)})}(t)),e.trim=()=>e.check(Yt(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return Yt(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(Yt(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(Yt(e=>e.toUpperCase()))}),pn=r("ZodString",(e,t)=>{Oe.init(e,t),dn.init(e,t),e.email=t=>e.check(function(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...G(t)})}(mn,t)),e.url=t=>e.check(function(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...G(t)})}(_n,t)),e.jwt=t=>e.check(function(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...G(t)})}(Zn,t)),e.emoji=t=>e.check(function(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...G(t)})}(yn,t)),e.guid=t=>e.check(Ft(vn,t)),e.uuid=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...G(t)})}(gn,t)),e.uuidv4=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...G(t)})}(gn,t)),e.uuidv6=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...G(t)})}(gn,t)),e.uuidv7=t=>e.check(function(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...G(t)})}(gn,t)),e.nanoid=t=>e.check(function(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...G(t)})}(wn,t)),e.guid=t=>e.check(Ft(vn,t)),e.cuid=t=>e.check(function(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...G(t)})}(bn,t)),e.cuid2=t=>e.check(function(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...G(t)})}(zn,t)),e.ulid=t=>e.check(function(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...G(t)})}(kn,t)),e.base64=t=>e.check(function(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...G(t)})}(Pn,t)),e.base64url=t=>e.check(function(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...G(t)})}(Rn,t)),e.xid=t=>e.check(function(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...G(t)})}(Sn,t)),e.ksuid=t=>e.check(function(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...G(t)})}(xn,t)),e.ipv4=t=>e.check(function(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...G(t)})}(En,t)),e.ipv6=t=>e.check(function(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...G(t)})}(In,t)),e.cidrv4=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...G(t)})}($n,t)),e.cidrv6=t=>e.check(function(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...G(t)})}(Tn,t)),e.e164=t=>e.check(function(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...G(t)})}(On,t)),e.datetime=t=>e.check(Qt(t)),e.date=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"date",check:"string_format",...G(t)})}(en,e)}(t)),e.time=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...G(t)})}(tn,e)}(t)),e.duration=t=>e.check(function(e){return function(e,t){return new e({type:"string",format:"duration",check:"string_format",...G(t)})}(nn,e)}(t))});function hn(e){return function(e,t){return new e({type:"string",...G(t)})}(pn,e)}const fn=r("ZodStringFormat",(e,t)=>{Ze.init(e,t),dn.init(e,t)}),mn=r("ZodEmail",(e,t)=>{qe.init(e,t),fn.init(e,t)}),vn=r("ZodGUID",(e,t)=>{je.init(e,t),fn.init(e,t)}),gn=r("ZodUUID",(e,t)=>{Ce.init(e,t),fn.init(e,t)}),_n=r("ZodURL",(e,t)=>{Ae.init(e,t),fn.init(e,t)}),yn=r("ZodEmoji",(e,t)=>{Me.init(e,t),fn.init(e,t)}),wn=r("ZodNanoID",(e,t)=>{Ne.init(e,t),fn.init(e,t)}),bn=r("ZodCUID",(e,t)=>{Ue.init(e,t),fn.init(e,t)}),zn=r("ZodCUID2",(e,t)=>{De.init(e,t),fn.init(e,t)}),kn=r("ZodULID",(e,t)=>{Fe.init(e,t),fn.init(e,t)}),Sn=r("ZodXID",(e,t)=>{Le.init(e,t),fn.init(e,t)}),xn=r("ZodKSUID",(e,t)=>{Je.init(e,t),fn.init(e,t)}),En=r("ZodIPv4",(e,t)=>{Ge.init(e,t),fn.init(e,t)}),In=r("ZodIPv6",(e,t)=>{Ke.init(e,t),fn.init(e,t)}),$n=r("ZodCIDRv4",(e,t)=>{Ye.init(e,t),fn.init(e,t)}),Tn=r("ZodCIDRv6",(e,t)=>{Xe.init(e,t),fn.init(e,t)}),Pn=r("ZodBase64",(e,t)=>{et.init(e,t),fn.init(e,t)}),Rn=r("ZodBase64URL",(e,t)=>{tt.init(e,t),fn.init(e,t)}),On=r("ZodE164",(e,t)=>{nt.init(e,t),fn.init(e,t)}),Zn=r("ZodJWT",(e,t)=>{ot.init(e,t),fn.init(e,t)}),jn=r("ZodNumber",(e,t)=>{rt.init(e,t),ln.init(e,t),e.gt=(t,n)=>e.check(Vt(t,n)),e.gte=(t,n)=>e.check(Ht(t,n)),e.min=(t,n)=>e.check(Ht(t,n)),e.lt=(t,n)=>e.check(Lt(t,n)),e.lte=(t,n)=>e.check(Jt(t,n)),e.max=(t,n)=>e.check(Jt(t,n)),e.int=t=>e.check(An(t)),e.safe=t=>e.check(An(t)),e.positive=t=>e.check(Vt(0,t)),e.nonnegative=t=>e.check(Ht(0,t)),e.negative=t=>e.check(Lt(0,t)),e.nonpositive=t=>e.check(Jt(0,t)),e.multipleOf=(t,n)=>e.check(Bt(t,n)),e.step=(t,n)=>e.check(Bt(t,n)),e.finite=()=>e;const n=e._zod.bag;e.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),e.isFinite=!0,e.format=n.format??null});function Cn(e){return function(e,t){return new e({type:"number",checks:[],...G(t)})}(jn,e)}const qn=r("ZodNumberFormat",(e,t)=>{it.init(e,t),jn.init(e,t)});function An(e){return function(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...G(t)})}(qn,e)}const Mn=r("ZodBoolean",(e,t)=>{st.init(e,t),ln.init(e,t)});function Nn(e){return function(e,t){return new e({type:"boolean",...G(t)})}(Mn,e)}const Un=r("ZodNull",(e,t)=>{at.init(e,t),ln.init(e,t)});function Dn(e){return function(e,t){return new e({type:"null",...G(t)})}(Un,e)}const Fn=r("ZodUnknown",(e,t)=>{ct.init(e,t),ln.init(e,t)});function Ln(){return new Fn({type:"unknown"})}const Jn=r("ZodNever",(e,t)=>{ut.init(e,t),ln.init(e,t)});const Vn=r("ZodArray",(e,t)=>{dt.init(e,t),ln.init(e,t),e.element=t.element,e.min=(t,n)=>e.check(Gt(t,n)),e.nonempty=t=>e.check(Gt(1,t)),e.max=(t,n)=>e.check(Wt(t,n)),e.length=(t,n)=>e.check(Kt(t,n)),e.unwrap=()=>e.element});function Hn(e,t){return function(e,t,n){return new e({type:"array",element:t,...G(n)})}(Vn,e,t)}const Bn=r("ZodObject",(e,t)=>{ft.init(e,t),ln.init(e,t),N(e,"shape",()=>t.shape),e.keyof=()=>io(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ln()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ln()}),e.strict=()=>{return e.clone({...e._zod.def,catchall:function(e,t){return new e({type:"never",...G(t)})}(Jn,t)});var t},e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>function(e,t){if(!V(t))throw new Error("Invalid input to extend: expected a plain object");const n={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return U(this,"shape",n),n},checks:[]};return W(e,n)}(e,t),e.merge=t=>{return o=t,W(n=e,{...n._zod.def,get shape(){const e={...n._zod.def.shape,...o._zod.def.shape};return U(this,"shape",e),e},catchall:o._zod.def.catchall,checks:[]});var n,o},e.pick=t=>function(e,t){const n={},o=e._zod.def;for(const e in t){if(!(e in o.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&(n[e]=o.shape[e])}return W(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.omit=t=>function(e,t){const n={...e._zod.def.shape},o=e._zod.def;for(const e in t){if(!(e in o.shape))throw new Error(`Unrecognized key: "${e}"`);t[e]&&delete n[e]}return W(e,{...e._zod.def,shape:n,checks:[]})}(e,t),e.partial=(...t)=>function(e,t,n){const o=t._zod.def.shape,r={...o};if(n)for(const t in n){if(!(t in o))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(r[t]=e?new e({type:"optional",innerType:o[t]}):o[t])}else for(const t in o)r[t]=e?new e({type:"optional",innerType:o[t]}):o[t];return W(t,{...t._zod.def,shape:r,checks:[]})}(lo,e,t[0]),e.required=(...t)=>function(e,t,n){const o=t._zod.def.shape,r={...o};if(n)for(const t in n){if(!(t in r))throw new Error(`Unrecognized key: "${t}"`);n[t]&&(r[t]=new e({type:"nonoptional",innerType:o[t]}))}else for(const t in o)r[t]=new e({type:"nonoptional",innerType:o[t]});return W(t,{...t._zod.def,shape:r,checks:[]})}(go,e,t[0])});function Wn(e,t){const n={type:"object",get shape(){return U(this,"shape",{...e}),this.shape},...G(t)};return new Bn(n)}function Gn(e,t){return new Bn({type:"object",get shape(){return U(this,"shape",{...e}),this.shape},catchall:Ln(),...G(t)})}const Kn=r("ZodUnion",(e,t)=>{vt.init(e,t),ln.init(e,t),e.options=t.options});function Yn(e,t){return new Kn({type:"union",options:e,...G(t)})}const Xn=r("ZodDiscriminatedUnion",(e,t)=>{Kn.init(e,t),gt.init(e,t)});function Qn(e,t,n){return new Xn({type:"union",options:t,discriminator:e,...G(n)})}const eo=r("ZodIntersection",(e,t)=>{_t.init(e,t),ln.init(e,t)});function to(e,t){return new eo({type:"intersection",left:e,right:t})}const no=r("ZodRecord",(e,t)=>{bt.init(e,t),ln.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function oo(e,t,n){return new no({type:"record",keyType:e,valueType:t,...G(n)})}const ro=r("ZodEnum",(e,t)=>{zt.init(e,t),ln.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const n=new Set(Object.keys(t.entries));e.extract=(e,o)=>{const r={};for(const o of e){if(!n.has(o))throw new Error(`Key ${o} not found in enum`);r[o]=t.entries[o]}return new ro({...t,checks:[],...G(o),entries:r})},e.exclude=(e,o)=>{const r={...t.entries};for(const t of e){if(!n.has(t))throw new Error(`Key ${t} not found in enum`);delete r[t]}return new ro({...t,checks:[],...G(o),entries:r})}});function io(e,t){const n=Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e;return new ro({type:"enum",entries:n,...G(t)})}const so=r("ZodLiteral",(e,t)=>{kt.init(e,t),ln.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function ao(e,t){return new so({type:"literal",values:Array.isArray(e)?e:[e],...G(t)})}const co=r("ZodTransform",(e,t)=>{St.init(e,t),ln.init(e,t),e._zod.parse=(n,o)=>{n.addIssue=o=>{if("string"==typeof o)n.issues.push(ne(o,n.value,t));else{const t=o;t.fatal&&(t.continue=!1),t.code??(t.code="custom"),t.input??(t.input=n.value),t.inst??(t.inst=e),t.continue??(t.continue=!0),n.issues.push(ne(t))}};const r=t.transform(n.value,n);return r instanceof Promise?r.then(e=>(n.value=e,n)):(n.value=r,n)}});function uo(e){return new co({type:"transform",transform:e})}const lo=r("ZodOptional",(e,t)=>{xt.init(e,t),ln.init(e,t),e.unwrap=()=>e._zod.def.innerType});function po(e){return new lo({type:"optional",innerType:e})}const ho=r("ZodNullable",(e,t)=>{Et.init(e,t),ln.init(e,t),e.unwrap=()=>e._zod.def.innerType});function fo(e){return new ho({type:"nullable",innerType:e})}const mo=r("ZodDefault",(e,t)=>{It.init(e,t),ln.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),vo=r("ZodPrefault",(e,t)=>{Tt.init(e,t),ln.init(e,t),e.unwrap=()=>e._zod.def.innerType}),go=r("ZodNonOptional",(e,t)=>{Pt.init(e,t),ln.init(e,t),e.unwrap=()=>e._zod.def.innerType}),_o=r("ZodCatch",(e,t)=>{Ot.init(e,t),ln.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),yo=r("ZodPipe",(e,t)=>{Zt.init(e,t),ln.init(e,t),e.in=t.in,e.out=t.out});function wo(e,t){return new yo({type:"pipe",in:e,out:t})}const bo=r("ZodReadonly",(e,t)=>{Ct.init(e,t),ln.init(e,t)}),zo=r("ZodCustom",(e,t)=>{At.init(e,t),ln.init(e,t)});function ko(e,t){return wo(uo(e),t)}const So=["2025-11-25","2025-06-18","2025-03-26","2024-11-05","2024-10-07"],xo="io.modelcontextprotocol/related-task",Eo="2.0",Io=function(e,t,n){const o=G(n);return o.abort??(o.abort=!0),new e({type:"custom",check:"custom",fn:(e=>null!==e&&("object"==typeof e||"function"==typeof e))??(()=>!0),...o})}(zo,0,undefined);const $o=Yn([hn(),Cn().int()]),To=hn(),Po=(Gn({ttl:Yn([Cn(),Dn()]).optional(),pollInterval:Cn().optional()}),Wn({ttl:Cn().optional()})),Ro=Wn({taskId:hn()}),Oo=Gn({progressToken:$o.optional(),[xo]:Ro.optional()}),Zo=Wn({_meta:Oo.optional()}),jo=Zo.extend({task:Po.optional()}),Co=Wn({method:hn(),params:Zo.loose().optional()}),qo=Wn({_meta:Oo.optional()}),Ao=Wn({method:hn(),params:qo.loose().optional()}),Mo=Gn({_meta:Oo.optional()}),No=Yn([hn(),Cn().int()]),Uo=Wn({jsonrpc:ao(Eo),id:No,...Co.shape}).strict(),Do=e=>Uo.safeParse(e).success,Fo=Wn({jsonrpc:ao(Eo),...Ao.shape}).strict(),Lo=Wn({jsonrpc:ao(Eo),id:No,result:Mo}).strict(),Jo=e=>Lo.safeParse(e).success;var Vo;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"}(Vo||(Vo={}));const Ho=Wn({jsonrpc:ao(Eo),id:No.optional(),error:Wn({code:Cn().int(),message:hn(),data:Ln().optional()})}).strict(),Bo=e=>Ho.safeParse(e).success,Wo=Yn([Uo,Fo,Lo,Ho]),Go=(Yn([Lo,Ho]),Mo.strict()),Ko=qo.extend({requestId:No.optional(),reason:hn().optional()}),Yo=Ao.extend({method:ao("notifications/cancelled"),params:Ko}),Xo=Wn({src:hn(),mimeType:hn().optional(),sizes:Hn(hn()).optional(),theme:io(["light","dark"]).optional()}),Qo=Wn({icons:Hn(Xo).optional()}),er=Wn({name:hn(),title:hn().optional()}),tr=er.extend({...er.shape,...Qo.shape,version:hn(),websiteUrl:hn().optional(),description:hn().optional()}),nr=to(Wn({applyDefaults:Nn().optional()}),oo(hn(),Ln())),or=ko(e=>e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length?{form:{}}:e,to(Wn({form:nr.optional(),url:Io.optional()}),oo(hn(),Ln()).optional())),rr=Gn({list:Io.optional(),cancel:Io.optional(),requests:Gn({sampling:Gn({createMessage:Io.optional()}).optional(),elicitation:Gn({create:Io.optional()}).optional()}).optional()}),ir=Gn({list:Io.optional(),cancel:Io.optional(),requests:Gn({tools:Gn({call:Io.optional()}).optional()}).optional()}),sr=Wn({experimental:oo(hn(),Io).optional(),sampling:Wn({context:Io.optional(),tools:Io.optional()}).optional(),elicitation:or.optional(),roots:Wn({listChanged:Nn().optional()}).optional(),tasks:rr.optional()}),ar=Zo.extend({protocolVersion:hn(),capabilities:sr,clientInfo:tr}),cr=Co.extend({method:ao("initialize"),params:ar}),ur=e=>cr.safeParse(e).success,lr=Wn({experimental:oo(hn(),Io).optional(),logging:Io.optional(),completions:Io.optional(),prompts:Wn({listChanged:Nn().optional()}).optional(),resources:Wn({subscribe:Nn().optional(),listChanged:Nn().optional()}).optional(),tools:Wn({listChanged:Nn().optional()}).optional(),tasks:ir.optional()}),dr=Mo.extend({protocolVersion:hn(),capabilities:lr,serverInfo:tr,instructions:hn().optional()}),pr=Ao.extend({method:ao("notifications/initialized"),params:qo.optional()}),hr=Co.extend({method:ao("ping"),params:Zo.optional()}),fr=Wn({progress:Cn(),total:po(Cn()),message:po(hn())}),mr=Wn({...qo.shape,...fr.shape,progressToken:$o}),vr=Ao.extend({method:ao("notifications/progress"),params:mr}),gr=Zo.extend({cursor:To.optional()}),_r=Co.extend({params:gr.optional()}),yr=Mo.extend({nextCursor:To.optional()}),wr=io(["working","input_required","completed","failed","cancelled"]),br=Wn({taskId:hn(),status:wr,ttl:Yn([Cn(),Dn()]),createdAt:hn(),lastUpdatedAt:hn(),pollInterval:po(Cn()),statusMessage:po(hn())}),zr=Mo.extend({task:br}),kr=qo.merge(br),Sr=Ao.extend({method:ao("notifications/tasks/status"),params:kr}),xr=Co.extend({method:ao("tasks/get"),params:Zo.extend({taskId:hn()})}),Er=Mo.merge(br),Ir=Co.extend({method:ao("tasks/result"),params:Zo.extend({taskId:hn()})}),$r=(Mo.loose(),_r.extend({method:ao("tasks/list")})),Tr=yr.extend({tasks:Hn(br)}),Pr=Co.extend({method:ao("tasks/cancel"),params:Zo.extend({taskId:hn()})}),Rr=(Mo.merge(br),Wn({uri:hn(),mimeType:po(hn()),_meta:oo(hn(),Ln()).optional()})),Or=Rr.extend({text:hn()}),Zr=hn().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),jr=Rr.extend({blob:Zr}),Cr=io(["user","assistant"]),qr=Wn({audience:Hn(Cr).optional(),priority:Cn().min(0).max(1).optional(),lastModified:Qt({offset:!0}).optional()}),Ar=Wn({...er.shape,...Qo.shape,uri:hn(),description:po(hn()),mimeType:po(hn()),annotations:qr.optional(),_meta:po(Gn({}))}),Mr=Wn({...er.shape,...Qo.shape,uriTemplate:hn(),description:po(hn()),mimeType:po(hn()),annotations:qr.optional(),_meta:po(Gn({}))}),Nr=_r.extend({method:ao("resources/list")}),Ur=yr.extend({resources:Hn(Ar)}),Dr=_r.extend({method:ao("resources/templates/list")}),Fr=yr.extend({resourceTemplates:Hn(Mr)}),Lr=Zo.extend({uri:hn()}),Jr=Lr,Vr=Co.extend({method:ao("resources/read"),params:Jr}),Hr=Mo.extend({contents:Hn(Yn([Or,jr]))}),Br=Ao.extend({method:ao("notifications/resources/list_changed"),params:qo.optional()}),Wr=Lr,Gr=Co.extend({method:ao("resources/subscribe"),params:Wr}),Kr=Lr,Yr=Co.extend({method:ao("resources/unsubscribe"),params:Kr}),Xr=qo.extend({uri:hn()}),Qr=Ao.extend({method:ao("notifications/resources/updated"),params:Xr}),ei=Wn({name:hn(),description:po(hn()),required:po(Nn())}),ti=Wn({...er.shape,...Qo.shape,description:po(hn()),arguments:po(Hn(ei)),_meta:po(Gn({}))}),ni=_r.extend({method:ao("prompts/list")}),oi=yr.extend({prompts:Hn(ti)}),ri=Zo.extend({name:hn(),arguments:oo(hn(),hn()).optional()}),ii=Co.extend({method:ao("prompts/get"),params:ri}),si=Wn({type:ao("text"),text:hn(),annotations:qr.optional(),_meta:oo(hn(),Ln()).optional()}),ai=Wn({type:ao("image"),data:Zr,mimeType:hn(),annotations:qr.optional(),_meta:oo(hn(),Ln()).optional()}),ci=Wn({type:ao("audio"),data:Zr,mimeType:hn(),annotations:qr.optional(),_meta:oo(hn(),Ln()).optional()}),ui=Wn({type:ao("tool_use"),name:hn(),id:hn(),input:oo(hn(),Ln()),_meta:oo(hn(),Ln()).optional()}),li=Wn({type:ao("resource"),resource:Yn([Or,jr]),annotations:qr.optional(),_meta:oo(hn(),Ln()).optional()}),di=Yn([si,ai,ci,Ar.extend({type:ao("resource_link")}),li]),pi=Wn({role:Cr,content:di}),hi=Mo.extend({description:hn().optional(),messages:Hn(pi)}),fi=Ao.extend({method:ao("notifications/prompts/list_changed"),params:qo.optional()}),mi=Wn({title:hn().optional(),readOnlyHint:Nn().optional(),destructiveHint:Nn().optional(),idempotentHint:Nn().optional(),openWorldHint:Nn().optional()}),vi=Wn({taskSupport:io(["required","optional","forbidden"]).optional()}),gi=Wn({...er.shape,...Qo.shape,description:hn().optional(),inputSchema:Wn({type:ao("object"),properties:oo(hn(),Io).optional(),required:Hn(hn()).optional()}).catchall(Ln()),outputSchema:Wn({type:ao("object"),properties:oo(hn(),Io).optional(),required:Hn(hn()).optional()}).catchall(Ln()).optional(),annotations:mi.optional(),execution:vi.optional(),_meta:oo(hn(),Ln()).optional()}),_i=_r.extend({method:ao("tools/list")}),yi=yr.extend({tools:Hn(gi)}),wi=Mo.extend({content:Hn(di).default([]),structuredContent:oo(hn(),Ln()).optional(),isError:Nn().optional()}),bi=(wi.or(Mo.extend({toolResult:Ln()})),jo.extend({name:hn(),arguments:oo(hn(),Ln()).optional()})),zi=Co.extend({method:ao("tools/call"),params:bi}),ki=Ao.extend({method:ao("notifications/tools/list_changed"),params:qo.optional()}),Si=(Wn({autoRefresh:Nn().default(!0),debounceMs:Cn().int().nonnegative().default(300)}),io(["debug","info","notice","warning","error","critical","alert","emergency"])),xi=Zo.extend({level:Si}),Ei=Co.extend({method:ao("logging/setLevel"),params:xi}),Ii=qo.extend({level:Si,logger:hn().optional(),data:Ln()}),$i=Ao.extend({method:ao("notifications/message"),params:Ii}),Ti=Wn({name:hn().optional()}),Pi=Wn({hints:Hn(Ti).optional(),costPriority:Cn().min(0).max(1).optional(),speedPriority:Cn().min(0).max(1).optional(),intelligencePriority:Cn().min(0).max(1).optional()}),Ri=Wn({mode:io(["auto","required","none"]).optional()}),Oi=Wn({type:ao("tool_result"),toolUseId:hn().describe("The unique identifier for the corresponding tool call."),content:Hn(di).default([]),structuredContent:Wn({}).loose().optional(),isError:Nn().optional(),_meta:oo(hn(),Ln()).optional()}),Zi=Qn("type",[si,ai,ci]),ji=Qn("type",[si,ai,ci,ui,Oi]),Ci=Wn({role:Cr,content:Yn([ji,Hn(ji)]),_meta:oo(hn(),Ln()).optional()}),qi=jo.extend({messages:Hn(Ci),modelPreferences:Pi.optional(),systemPrompt:hn().optional(),includeContext:io(["none","thisServer","allServers"]).optional(),temperature:Cn().optional(),maxTokens:Cn().int(),stopSequences:Hn(hn()).optional(),metadata:Io.optional(),tools:Hn(gi).optional(),toolChoice:Ri.optional()}),Ai=Co.extend({method:ao("sampling/createMessage"),params:qi}),Mi=Mo.extend({model:hn(),stopReason:po(io(["endTurn","stopSequence","maxTokens"]).or(hn())),role:Cr,content:Zi}),Ni=Mo.extend({model:hn(),stopReason:po(io(["endTurn","stopSequence","maxTokens","toolUse"]).or(hn())),role:Cr,content:Yn([ji,Hn(ji)])}),Ui=Wn({type:ao("boolean"),title:hn().optional(),description:hn().optional(),default:Nn().optional()}),Di=Wn({type:ao("string"),title:hn().optional(),description:hn().optional(),minLength:Cn().optional(),maxLength:Cn().optional(),format:io(["email","uri","date","date-time"]).optional(),default:hn().optional()}),Fi=Wn({type:io(["number","integer"]),title:hn().optional(),description:hn().optional(),minimum:Cn().optional(),maximum:Cn().optional(),default:Cn().optional()}),Li=Wn({type:ao("string"),title:hn().optional(),description:hn().optional(),enum:Hn(hn()),default:hn().optional()}),Ji=Wn({type:ao("string"),title:hn().optional(),description:hn().optional(),oneOf:Hn(Wn({const:hn(),title:hn()})),default:hn().optional()}),Vi=Wn({type:ao("string"),title:hn().optional(),description:hn().optional(),enum:Hn(hn()),enumNames:Hn(hn()).optional(),default:hn().optional()}),Hi=Yn([Li,Ji]),Bi=Yn([Wn({type:ao("array"),title:hn().optional(),description:hn().optional(),minItems:Cn().optional(),maxItems:Cn().optional(),items:Wn({type:ao("string"),enum:Hn(hn())}),default:Hn(hn()).optional()}),Wn({type:ao("array"),title:hn().optional(),description:hn().optional(),minItems:Cn().optional(),maxItems:Cn().optional(),items:Wn({anyOf:Hn(Wn({const:hn(),title:hn()}))}),default:Hn(hn()).optional()})]),Wi=Yn([Vi,Hi,Bi]),Gi=Yn([Wi,Ui,Di,Fi]),Ki=Yn([jo.extend({mode:ao("form").optional(),message:hn(),requestedSchema:Wn({type:ao("object"),properties:oo(hn(),Gi),required:Hn(hn()).optional()})}),jo.extend({mode:ao("url"),message:hn(),elicitationId:hn(),url:hn().url()})]),Yi=Co.extend({method:ao("elicitation/create"),params:Ki}),Xi=qo.extend({elicitationId:hn()}),Qi=Ao.extend({method:ao("notifications/elicitation/complete"),params:Xi}),es=Mo.extend({action:io(["accept","decline","cancel"]),content:ko(e=>null===e?void 0:e,oo(hn(),Yn([hn(),Cn(),Nn(),Hn(hn())])).optional())}),ts=Wn({type:ao("ref/resource"),uri:hn()}),ns=Wn({type:ao("ref/prompt"),name:hn()}),os=Zo.extend({ref:Yn([ns,ts]),argument:Wn({name:hn(),value:hn()}),context:Wn({arguments:oo(hn(),hn()).optional()}).optional()}),rs=Co.extend({method:ao("completion/complete"),params:os}),is=Mo.extend({completion:Gn({values:Hn(hn()).max(100),total:po(Cn().int()),hasMore:po(Nn())})}),ss=Wn({uri:hn().startsWith("file://"),name:hn().optional(),_meta:oo(hn(),Ln()).optional()}),as=Co.extend({method:ao("roots/list"),params:Zo.optional()}),cs=Mo.extend({roots:Hn(ss)}),us=Ao.extend({method:ao("notifications/roots/list_changed"),params:qo.optional()});Yn([hr,cr,rs,Ei,ii,ni,Nr,Dr,Vr,Gr,Yr,zi,_i,xr,Ir,$r,Pr]),Yn([Yo,vr,pr,us,Sr]),Yn([Go,Mi,Ni,es,cs,Er,Tr,zr]),Yn([hr,Ai,Yi,as,xr,Ir,$r,Pr]),Yn([Yo,vr,$i,Qr,Br,ki,fi,Sr,Qi]),Yn([Go,dr,is,hi,oi,Ur,Fr,Hr,wi,yi,Er,Tr,zr]),Error;class ls{constructor(e={}){this._started=!1,this._streamMapping=new Map,this._requestToStreamMapping=new Map,this._requestResponseMap=new Map,this._initialized=!1,this._enableJsonResponse=!1,this._standaloneSseStreamId="_GET_stream",this.sessionIdGenerator=e.sessionIdGenerator,this._enableJsonResponse=e.enableJsonResponse??!1,this._eventStore=e.eventStore,this._onsessioninitialized=e.onsessioninitialized,this._onsessionclosed=e.onsessionclosed,this._allowedHosts=e.allowedHosts,this._allowedOrigins=e.allowedOrigins,this._enableDnsRebindingProtection=e.enableDnsRebindingProtection??!1,this._retryInterval=e.retryInterval}async start(){if(this._started)throw new Error("Transport already started");this._started=!0}createJsonErrorResponse(e,t,n,o){const r={code:t,message:n};return void 0!==o?.data&&(r.data=o.data),new Response(JSON.stringify({jsonrpc:"2.0",error:r,id:null}),{status:e,headers:{"Content-Type":"application/json",...o?.headers}})}validateRequestHeaders(e){if(this._enableDnsRebindingProtection){if(this._allowedHosts&&this._allowedHosts.length>0){const t=e.headers.get("host");if(!t||!this._allowedHosts.includes(t)){const e=`Invalid Host header: ${t}`;return this.onerror?.(new Error(e)),this.createJsonErrorResponse(403,-32e3,e)}}if(this._allowedOrigins&&this._allowedOrigins.length>0){const t=e.headers.get("origin");if(t&&!this._allowedOrigins.includes(t)){const e=`Invalid Origin header: ${t}`;return this.onerror?.(new Error(e)),this.createJsonErrorResponse(403,-32e3,e)}}}}async handleRequest(e,t){const n=this.validateRequestHeaders(e);if(n)return n;switch(e.method){case"POST":return this.handlePostRequest(e,t);case"GET":return this.handleGetRequest(e);case"DELETE":return this.handleDeleteRequest(e);default:return this.handleUnsupportedRequest()}}async writePrimingEvent(e,t,n,o){if(!this._eventStore)return;if(o<"2025-11-25")return;const r=await this._eventStore.storeEvent(n,{});let i=`id: ${r}\ndata: \n\n`;void 0!==this._retryInterval&&(i=`id: ${r}\nretry: ${this._retryInterval}\ndata: \n\n`),e.enqueue(t.encode(i))}async handleGetRequest(e){const t=e.headers.get("accept");if(!t?.includes("text/event-stream"))return this.createJsonErrorResponse(406,-32e3,"Not Acceptable: Client must accept text/event-stream");const n=this.validateSession(e);if(n)return n;const o=this.validateProtocolVersion(e);if(o)return o;if(this._eventStore){const t=e.headers.get("last-event-id");if(t)return this.replayEvents(t)}if(void 0!==this._streamMapping.get(this._standaloneSseStreamId))return this.createJsonErrorResponse(409,-32e3,"Conflict: Only one SSE stream is allowed per session");const r=new TextEncoder;let i;const s=new ReadableStream({start:e=>{i=e},cancel:()=>{this._streamMapping.delete(this._standaloneSseStreamId)}}),a={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform",Connection:"keep-alive"};return void 0!==this.sessionId&&(a["mcp-session-id"]=this.sessionId),this._streamMapping.set(this._standaloneSseStreamId,{controller:i,encoder:r,cleanup:()=>{this._streamMapping.delete(this._standaloneSseStreamId);try{i.close()}catch{}}}),new Response(s,{headers:a})}async replayEvents(e){if(!this._eventStore)return this.createJsonErrorResponse(400,-32e3,"Event store not configured");try{let t;if(this._eventStore.getStreamIdForEventId){if(t=await this._eventStore.getStreamIdForEventId(e),!t)return this.createJsonErrorResponse(400,-32e3,"Invalid event ID format");if(void 0!==this._streamMapping.get(t))return this.createJsonErrorResponse(409,-32e3,"Conflict: Stream already has an active connection")}const n={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform",Connection:"keep-alive"};void 0!==this.sessionId&&(n["mcp-session-id"]=this.sessionId);const o=new TextEncoder;let r;const i=new ReadableStream({start:e=>{r=e},cancel:()=>{}}),s=await this._eventStore.replayEventsAfter(e,{send:async(e,t)=>{if(!this.writeSSEEvent(r,o,t,e)){this.onerror?.(new Error("Failed replay events"));try{r.close()}catch{}}}});return this._streamMapping.set(s,{controller:r,encoder:o,cleanup:()=>{this._streamMapping.delete(s);try{r.close()}catch{}}}),new Response(i,{headers:n})}catch(e){return this.onerror?.(e),this.createJsonErrorResponse(500,-32e3,"Error replaying events")}}writeSSEEvent(e,t,n,o){try{let r="event: message\n";return o&&(r+=`id: ${o}\n`),r+=`data: ${JSON.stringify(n)}\n\n`,e.enqueue(t.encode(r)),!0}catch{return!1}}handleUnsupportedRequest(){return new Response(JSON.stringify({jsonrpc:"2.0",error:{code:-32e3,message:"Method not allowed."},id:null}),{status:405,headers:{Allow:"GET, POST, DELETE","Content-Type":"application/json"}})}async handlePostRequest(e,t){try{const n=e.headers.get("accept");if(!n?.includes("application/json")||!n.includes("text/event-stream"))return this.createJsonErrorResponse(406,-32e3,"Not Acceptable: Client must accept both application/json and text/event-stream");const o=e.headers.get("content-type");if(!o||!o.includes("application/json"))return this.createJsonErrorResponse(415,-32e3,"Unsupported Media Type: Content-Type must be application/json");const r={headers:Object.fromEntries(e.headers.entries())};let i,s;if(void 0!==t?.parsedBody)i=t.parsedBody;else try{i=await e.json()}catch{return this.createJsonErrorResponse(400,-32700,"Parse error: Invalid JSON")}try{s=Array.isArray(i)?i.map(e=>Wo.parse(e)):[Wo.parse(i)]}catch{return this.createJsonErrorResponse(400,-32700,"Parse error: Invalid JSON-RPC message")}const a=s.some(ur);if(a){if(this._initialized&&void 0!==this.sessionId)return this.createJsonErrorResponse(400,-32600,"Invalid Request: Server already initialized");if(s.length>1)return this.createJsonErrorResponse(400,-32600,"Invalid Request: Only one initialization request is allowed");this.sessionId=this.sessionIdGenerator?.(),this._initialized=!0,this.sessionId&&this._onsessioninitialized&&await Promise.resolve(this._onsessioninitialized(this.sessionId))}if(!a){const t=this.validateSession(e);if(t)return t;const n=this.validateProtocolVersion(e);if(n)return n}if(!s.some(Do)){for(const e of s)this.onmessage?.(e,{authInfo:t?.authInfo,requestInfo:r});return new Response(null,{status:202})}const c=crypto.randomUUID(),u=s.find(e=>ur(e)),l=u?u.params.protocolVersion:e.headers.get("mcp-protocol-version")??"2025-03-26";if(this._enableJsonResponse)return new Promise(e=>{this._streamMapping.set(c,{resolveJson:e,cleanup:()=>{this._streamMapping.delete(c)}});for(const e of s)Do(e)&&this._requestToStreamMapping.set(e.id,c);for(const e of s)this.onmessage?.(e,{authInfo:t?.authInfo,requestInfo:r})});const d=new TextEncoder;let p;const h=new ReadableStream({start:e=>{p=e},cancel:()=>{this._streamMapping.delete(c)}}),f={"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"};void 0!==this.sessionId&&(f["mcp-session-id"]=this.sessionId);for(const e of s)Do(e)&&(this._streamMapping.set(c,{controller:p,encoder:d,cleanup:()=>{this._streamMapping.delete(c);try{p.close()}catch{}}}),this._requestToStreamMapping.set(e.id,c));await this.writePrimingEvent(p,d,c,l);for(const e of s){let n,o;Do(e)&&this._eventStore&&l>="2025-11-25"&&(n=()=>{this.closeSSEStream(e.id)},o=()=>{this.closeStandaloneSSEStream()}),this.onmessage?.(e,{authInfo:t?.authInfo,requestInfo:r,closeSSEStream:n,closeStandaloneSSEStream:o})}return new Response(h,{status:200,headers:f})}catch(e){return this.onerror?.(e),this.createJsonErrorResponse(400,-32700,"Parse error",{data:String(e)})}}async handleDeleteRequest(e){const t=this.validateSession(e);if(t)return t;return this.validateProtocolVersion(e)||(await Promise.resolve(this._onsessionclosed?.(this.sessionId)),await this.close(),new Response(null,{status:200}))}validateSession(e){if(void 0===this.sessionIdGenerator)return;if(!this._initialized)return this.createJsonErrorResponse(400,-32e3,"Bad Request: Server not initialized");const t=e.headers.get("mcp-session-id");return t?t!==this.sessionId?this.createJsonErrorResponse(404,-32001,"Session not found"):void 0:this.createJsonErrorResponse(400,-32e3,"Bad Request: Mcp-Session-Id header is required")}validateProtocolVersion(e){const t=e.headers.get("mcp-protocol-version");if(null!==t&&!So.includes(t))return this.createJsonErrorResponse(400,-32e3,`Bad Request: Unsupported protocol version: ${t} (supported versions: ${So.join(", ")})`)}async close(){this._streamMapping.forEach(({cleanup:e})=>{e()}),this._streamMapping.clear(),this._requestResponseMap.clear(),this.onclose?.()}closeSSEStream(e){const t=this._requestToStreamMapping.get(e);if(!t)return;const n=this._streamMapping.get(t);n&&n.cleanup()}closeStandaloneSSEStream(){const e=this._streamMapping.get(this._standaloneSseStreamId);e&&e.cleanup()}async send(e,t){let n=t?.relatedRequestId;if((Jo(e)||Bo(e))&&(n=e.id),void 0===n){if(Jo(e)||Bo(e))throw new Error("Cannot send a response on a standalone SSE stream unless resuming a previous client request");let t;this._eventStore&&(t=await this._eventStore.storeEvent(this._standaloneSseStreamId,e));const n=this._streamMapping.get(this._standaloneSseStreamId);if(void 0===n)return;return void(n.controller&&n.encoder&&this.writeSSEEvent(n.controller,n.encoder,e,t))}const o=this._requestToStreamMapping.get(n);if(!o)throw new Error(`No connection established for request ID: ${String(n)}`);const r=this._streamMapping.get(o);if(!this._enableJsonResponse&&r?.controller&&r?.encoder){let t;this._eventStore&&(t=await this._eventStore.storeEvent(o,e)),this.writeSSEEvent(r.controller,r.encoder,e,t)}if(Jo(e)||Bo(e)){this._requestResponseMap.set(n,e);const t=Array.from(this._requestToStreamMapping.entries()).filter(([e,t])=>t===o).map(([e])=>e);if(t.every(e=>this._requestResponseMap.has(e))){if(!r)throw new Error(`No connection established for request ID: ${String(n)}`);if(this._enableJsonResponse&&r.resolveJson){const e={"Content-Type":"application/json"};void 0!==this.sessionId&&(e["mcp-session-id"]=this.sessionId);const n=t.map(e=>this._requestResponseMap.get(e));1===n.length?r.resolveJson(new Response(JSON.stringify(n[0]),{status:200,headers:e})):r.resolveJson(new Response(JSON.stringify(n),{status:200,headers:e}))}else r.cleanup();for(const e of t)this._requestResponseMap.delete(e),this._requestToStreamMapping.delete(e)}}}}class ds{constructor(e={}){this._requestContext=new WeakMap,this._webStandardTransport=new ls(e),this._requestListener=(0,o.getRequestListener)(async e=>{const t=this._requestContext.get(e);return this._webStandardTransport.handleRequest(e,{authInfo:t?.authInfo,parsedBody:t?.parsedBody})})}get sessionId(){return this._webStandardTransport.sessionId}set onclose(e){this._webStandardTransport.onclose=e}get onclose(){return this._webStandardTransport.onclose}set onerror(e){this._webStandardTransport.onerror=e}get onerror(){return this._webStandardTransport.onerror}set onmessage(e){this._webStandardTransport.onmessage=e}get onmessage(){return this._webStandardTransport.onmessage}async start(){return this._webStandardTransport.start()}async close(){return this._webStandardTransport.close()}async send(e,t){return this._webStandardTransport.send(e,t)}async handleRequest(e,t,n){const r=e.auth,i=(0,o.getRequestListener)(async e=>this._webStandardTransport.handleRequest(e,{authInfo:r,parsedBody:n}));await i(e,t)}closeSSEStream(e){this._webStandardTransport.closeSSEStream(e)}closeStandaloneSSEStream(){this._webStandardTransport.closeStandaloneSSEStream()}}},982:e=>{e.exports=require("crypto")}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o=n(15),r=exports;for(var i in o)r[i]=o[i];o.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();
//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/d2597a5c475647ed306b22de1e39853c7812d07d/extensions/chrome-devtools-mcp/dist/extension.js.map